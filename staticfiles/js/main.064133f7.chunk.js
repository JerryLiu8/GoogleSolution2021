(this.webpackJsonpphysiodash=this.webpackJsonpphysiodash||[]).push([[0],{52:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(19),r=n.n(i),s=(n(52),n(29)),o=n.n(s),l=n(35),h=n(16),j=n(30),d=n.n(j),u=n(76),b=n(78),p=n(74),m=n(77),O=n(2),g=Object(p.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh"},main:{marginTop:e.spacing(8),marginBottom:e.spacing(2)},footer:{padding:e.spacing(3,2),marginTop:"auto",backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[800]}}}));function x(e){var t=e.children,n=g();return Object(O.jsxs)("div",{className:n.root,children:[Object(O.jsx)(u.a,{}),Object(O.jsxs)(m.a,{component:"main",className:n.main,maxWidth:"sm",children:[Object(O.jsx)(b.a,{variant:"h3",component:"h1",gutterBottom:!0,children:"PhysioDash"}),Object(O.jsx)(b.a,{variant:"h5",component:"h3",gutterBottom:!0,children:"Work out summaries through video for physical therapists and home gym goers"}),t]})]})}var f=Object(p.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh"},main:{marginTop:e.spacing(8),marginBottom:e.spacing(2)},footer:{padding:e.spacing(3,2),marginTop:"auto",backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[800]}}}));function y(e){var t=e.children,n=f();return Object(O.jsxs)("div",{className:n.root,children:[Object(O.jsx)(u.a,{}),Object(O.jsxs)(m.a,{component:"main",className:n.main,maxWidth:"sm",children:[Object(O.jsx)(b.a,{variant:"h3",component:"h1",gutterBottom:!0,children:"PhysioDash"}),Object(O.jsx)(b.a,{variant:"h5",component:"h3",gutterBottom:!0,children:"Your workout summary"}),t]})]})}var v=n(40),S=n(7),w=n(79),k=n(86),C=n(80),T=n(81),B=n(82),N=n(83),P=n(84),D=n(85),E=Object(p.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1),width:e.spacing(16),height:e.spacing(16),padding:"10px"},table:{minWidth:650,padding:"10px"}}}}));var W=function(){var e=E(),t=Object(a.useState)("/physiodash"),n=Object(h.a)(t,2),i=n[0],r=n[1],s=Object(a.useState)(!1),j=Object(h.a)(s,2),u=j[0],b=j[1],p=Object(a.useState)(5),m=Object(h.a)(p,2),g=m[0],f=m[1],W=Object(a.useState)("0"),z=Object(h.a)(W,2),F=z[0],L=z[1],_=c.a.useRef(null),R=c.a.useRef(null),q=c.a.useState(!1),H=Object(h.a)(q,2),I=(H[0],H[1]),J=c.a.useState([]),M=Object(h.a)(J,2),A=M[0],G=M[1],V=Object(a.useState)("/stop_record"),Y=Object(h.a)(V,2),K=Y[0],Q=(Y[1],Object(a.useState)(0)),U=Object(h.a)(Q,2),X=U[0],Z=U[1],$=Object(a.useState)(0),ee=Object(h.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(0),ce=Object(h.a)(ae,2),ie=ce[0],re=ce[1],se=Object(a.useState)(!1),oe=Object(h.a)(se,2),le=oe[0],he=oe[1],je=c.a.useCallback((function(){!function(){for(var e=1,t=function(t){setTimeout((function(){f(t)}),1e3*e),e+=1},n=5;n>0;n--)t(n);setTimeout((function(){f(5)}),6e3)}(),setTimeout((function(){I(!0),R.current=new MediaRecorder(_.current.stream,{mimeType:"video/webm"}),R.current.addEventListener("dataavailable",de),R.current.start()}),6e3)}),[_,I,R]),de=c.a.useCallback((function(e){var t=e.data;t.size>0&&G((function(e){return e.concat(t)}))}),[G]),ue=c.a.useCallback((function(){R.current.stop(),I(!1)}),[R,_,I]),be=c.a.useCallback(Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A.length&&(t=new Blob(A,{type:"video/webm"}),(n=new FormData).append("video",t),fetch("physiodash/upload/",{method:"POST",body:n}).then((function(e){fetch("physiodash/results/",{method:"GET"}).then((function(e){return e.json()})).then((function(e){var t=e.wallPushups,n=e.lunges,a=e.squats;Z(t),ne(n),re(a),he(!1)}))})).catch((function(e){console.log(e)})),G([]));case 1:case"end":return e.stop()}}),e)}))),[A]);Object(a.useEffect)((function(){"/set_record"===K?fetch("/set_record").then((function(e){return e.json()})).then((function(e){L(e.framesNum)})):"/stop_record"===K&&fetch("/stop_record").then((function(e){return e.json()})).then((function(e){L("0")}))}),[F,K]);var pe=function(e){r(e),be()},me=function(){!0===!u?(je(),he(!0)):ue(),b(!u)};return Object(O.jsx)("div",{id:"app-root",children:Object(O.jsxs)(v.a,{children:[Object(O.jsx)(S.a,{to:i}),Object(O.jsxs)(S.d,{children:[Object(O.jsx)(S.b,{exact:!0,path:"/physiodash",children:Object(O.jsxs)(x,{children:[5!==g&&Object(O.jsx)(w.a,{style:{margin:"auto",textAlign:"center",width:640},children:Object(O.jsx)("h2",{children:"Session starts in: ".concat(g)})}),Object(O.jsx)(d.a,{audio:!1,ref:_}),u?Object(O.jsx)(k.a,{style:{padding:"5px"},onClick:me,variant:"contained",color:"primary",size:"large",children:"End Session"}):Object(O.jsx)(k.a,{style:{padding:"5px"},onClick:me,variant:"contained",color:"primary",size:"large",children:"Begin Session"}),A.length>0&&Object(O.jsx)("div",{children:Object(O.jsx)(k.a,{style:{padding:"5px"},onClick:function(){return pe("/summary")},variant:"contained",color:"secondary",size:"large",children:"View Summary"})})]})}),Object(O.jsx)(S.b,{exact:!0,path:"/summary",children:Object(O.jsxs)(y,{children:[!1===le?Object(O.jsx)(C.a,{component:w.a,children:Object(O.jsxs)(T.a,{className:e.table,"aria-label":"simple table",children:[Object(O.jsxs)(B.a,{children:[Object(O.jsx)(N.a,{children:"Exercise"}),Object(O.jsx)(N.a,{align:"center",children:"Reps"})]}),Object(O.jsxs)(P.a,{children:[Object(O.jsxs)(D.a,{children:[Object(O.jsx)(N.a,{component:"th",scope:"row",children:"Wall Pushups"}),Object(O.jsx)(N.a,{align:"center",children:X})]}),Object(O.jsxs)(D.a,{children:[Object(O.jsx)(N.a,{component:"th",scope:"row",children:"Squats"}),Object(O.jsx)(N.a,{align:"center",children:ie})]}),Object(O.jsxs)(D.a,{children:[Object(O.jsx)(N.a,{component:"th",scope:"row",children:"Lunges"}),Object(O.jsx)(N.a,{align:"center",children:te})]})]})]})}):Object(O.jsx)("h1",{children:"Workout Summary Loading"}),Object(O.jsx)(k.a,{style:{padding:"5px"},onClick:function(){return pe("/physiodash")},variant:"contained",color:"primary",size:"large",children:"New Session"})]})})]})]})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,88)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};r.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(W,{})}),document.getElementById("root")),z()}},[[60,1,2]]]);
//# sourceMappingURL=main.064133f7.chunk.js.map